{"version":3,"sources":["components/chat/Chat.js","components/Form.js","App.js","index.js"],"names":["Chat","useState","socket","setSocket","message","setMessage","sending","setSending","messages","setMessages","roomName","setRoomName","isToggle","setIsToggle","window","innerWidth","isMobileView","setIsMovileView","roomData","setRoomData","useParams","username","room","history","useHistory","windowSizeHandler","useEffect","addEventListener","removeEventListener","io","location","hostname","on","console","log","users","emit","error","push","url","msgTime","tm","split","isDay","autoScroll","msg","messagePart","document","querySelector","newMessageHeight","lastElementChild","offsetHeight","visibleHeight","scrollHeight","scrollTop","className","style","padding","onClick","map","data","name","length","substring","value","fontWeight","href","target","opacity","onSubmit","e","preventDefault","acknowledge","type","placeholder","onChange","required","disabled","navigator","geolocation","getCurrentPosition","position","Long","coords","longitude","Latit","latitude","Form","credentials","setCredentials","inputHandler","autoComplete","App","exact","path","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c42e4cc1.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {io} from \"socket.io-client\";\r\nimport { useParams,useHistory } from 'react-router';\r\nimport \"../../styles/chat.scss\";\r\nimport { VscListFlat } from \"react-icons/vsc\";\r\nexport default function Chat() {\r\nconst [socket,setSocket]=useState(null);\r\nconst [message,setMessage]=useState(\"\");\r\nconst [sending,setSending]=useState(false);\r\nconst [messages,setMessages]=useState([]);\r\nconst [roomName,setRoomName]=useState(\"\");\r\nconst [isToggle,setIsToggle]=useState(false);\r\nconst [isMobileView,setIsMovileView]=useState(()=>{\r\n    if(window.innerWidth<=670)return true;\r\n    return false;\r\n});\r\nconst [roomData,setRoomData]=useState();\r\nconst {username,room}=useParams();\r\nconst history=useHistory();\r\n\r\n\r\nconst windowSizeHandler=()=>{\r\n\r\n    \r\n    if(window.innerWidth<=670 && !isMobileView){\r\n        setIsMovileView(true);\r\n    }else if(window.innerWidth>670 && isMobileView){\r\n        setIsMovileView(false);\r\n        setIsToggle(false);\r\n    }\r\n\r\n   \r\n}\r\n\r\nuseEffect(()=>{\r\n    window.addEventListener(\"resize\",windowSizeHandler);\r\n\r\n    return ()=>{\r\n        window.removeEventListener(\"resize\",windowSizeHandler);\r\n    }\r\n},[windowSizeHandler])\r\n\r\nuseEffect(()=>{\r\n    // setSocket(io(\"ws:https://real-time-chat-using-socket.herokuapp.com/\"));\r\n    setSocket(io(`http://${window.location.hostname}:5000`));\r\n},[]);\r\n\r\n\r\nuseEffect(()=>{\r\n\r\n    \r\n\r\n    socket?.on(\"message\",(message)=>{\r\n        console.log(message);\r\n    });\r\n\r\n   \r\n\r\n    socket?.on(\"roomData\",({room,users})=>{\r\n        setRoomData(users);\r\n        setRoomName(room);\r\n       \r\n    })\r\n\r\n   \r\n\r\n    \r\n    \r\n    socket?.emit('join',{username,room},(error)=>{\r\n        \r\n        if(error){\r\n           console.log(error);\r\n           history.push('/')\r\n        }\r\n    });\r\n\r\n    \r\n\r\n},[socket]);\r\n\r\n\r\n\r\nuseEffect(()=>{\r\n\r\n    socket?.on(\"sendLocationUrl\",(url,msgTime,username)=>{\r\n        \r\n      \r\n        let tm=msgTime.split(':');\r\n        let isDay=tm[2].split(' ');\r\n\r\n        msgTime=`${tm[0]}:${tm[1]} ${isDay[1]}`;\r\n        \r\n        \r\n      \r\n        setMessages([...messages,{url,msgTime,username}]);\r\n        autoScroll();\r\n    });\r\n\r\n    socket?.on(\"messageArray\",(msg,msgTime,username)=>{\r\n        let tm=msgTime.split(':');\r\n        let isDay=tm[2].split(' ');\r\n\r\n        msgTime=`${tm[0]}:${tm[1]} ${isDay[1]}`;\r\n        \r\n        \r\n      \r\n        setMessages([...messages,{msg,msgTime,username}]);\r\n        autoScroll();\r\n       \r\n        \r\n    });\r\n\r\n    console.log(messages);\r\n\r\n\r\n\r\n},[socket,messages,setMessages]);\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst getLocationHandler=()=>{\r\n    if(!navigator.geolocation){\r\n        console.log(\"can not access location\");\r\n    }else{\r\n        navigator.geolocation.getCurrentPosition((position)=>{\r\n             \r\n             socket.emit(\"geoLocation\",{\r\n                Long:position.coords.longitude,\r\n                Latit:position.coords.latitude\r\n                \r\n            })\r\n        })\r\n      \r\n    }\r\n}\r\n\r\nconst autoScroll=()=>{\r\n  \r\n    const messagePart=document.querySelector(\".chat__messages\");\r\n    const newMessage=messagePart.lastElementChild;\r\n   \r\n    const newMessageHeight=newMessage.offsetHeight + 10;\r\n\r\n    const visibleHeight=messagePart.offsetHeight;\r\n\r\n    const containerHeight=messagePart.scrollHeight;\r\n\r\n    const scrollOffset=messagePart.scrollTop+visibleHeight;\r\n\r\n    if(containerHeight-newMessageHeight<=scrollOffset){\r\n        messagePart.scrollTop=messagePart.scrollHeight;\r\n    }\r\n\r\n\r\n}\r\nconst toggleHandler=()=>{\r\n    setIsToggle(!isToggle);\r\n}\r\nconst submitHandler=(e)=>{\r\n    e.preventDefault();\r\n    \r\n    setSending(true);\r\n    socket.emit(\"sendMessage\",{message,username},(acknowledge)=>{\r\n        setSending(false);\r\n       \r\n        console.log(`message has been ${acknowledge} successfully`);\r\n    });\r\n  \r\n    setMessage(\"\");\r\n\r\n}\r\n    return (<div className=\"chatPage\">\r\n        {\r\n            isMobileView?<div style={{padding:\"10px\"}}>\r\n            <VscListFlat onClick={toggleHandler} className=\"toggleIcon\" />\r\n        </div>:null\r\n        }\r\n        <div className=\"chat__extDiv\">\r\n            {\r\n                !isMobileView || isToggle?\r\n                <div className=\"chat__sideBar\">\r\n                <div className=\"chat__sideBar__heading\">\r\n                    <p>{roomName}</p>\r\n                </div>\r\n                <div className=\"chat__sideBar__users\">\r\n                    {roomData?.map((data)=>{\r\n                        let name=data.username;\r\n                        if(data.username.length>=15){\r\n                             name=data.username.substring(0,15);\r\n                             name=name+\"...\";\r\n                        }\r\n                        return <div className=\"chat__sideBar__user\">\r\n                            <p className=\"chat__user\">\r\n                                {name}\r\n                            </p>\r\n                        </div>\r\n                    })}\r\n                </div>\r\n             </div>:\r\n             null\r\n            }\r\n\r\n\r\n            {\r\n                !isToggle?\r\n                <div className=\"chat__msgPart\">\r\n          \r\n                <div className=\"chat__messages\">\r\n                {messages?.map((value)=>{\r\n                    let name=value.username;\r\n                    if(value.username.length>=15){\r\n                         name=value.username.substring(0,15);\r\n                         name=name+\"...\";\r\n                    }\r\n                    return <div className={value.username!=username?\"message__box\":\"message__box message__box__right\"} >{name}\r\n                    {\r\n                    value?.msg ? <p className=\"time__rightAlinged\" style={{fontWeight:\"800\"}}>{value.msg}</p>:\r\n                    <a href={value?.url} target=\"_blank\"  >The current Location</a>\r\n                    }\r\n                    <p className=\"time__rightAlinged\" style={{fontWeight:\"bold\",opacity:\"0.7\"}}>{value.msgTime}</p>\r\n                    </div>\r\n                })}\r\n              \r\n                </div>\r\n                <div className=\"chat__msg__bottom\">\r\n                    <div className=\"chat__inputForm\">\r\n                    <form onSubmit={submitHandler} >\r\n                 <input   type=\"text\" placeholder=\"your message\" value={message} onChange={(e)=>setMessage(e.target.value)} required />\r\n                 <button type=\"submit\" disabled={sending} >{sending?\"sending\":\"send\"}</button>\r\n                 </form>\r\n                    </div>\r\n               <div className=\"chat__locationButton\">\r\n               <button onClick={getLocationHandler}>getLocation</button>\r\n               </div>\r\n                \r\n                </div>\r\n                \r\n            </div>\r\n                :null\r\n            }\r\n           \r\n            \r\n            \r\n            \r\n           \r\n           \r\n        </div>\r\n    </div>\r\n       \r\n    )\r\n}\r\n\r\n","import React,{useState} from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport \"../styles/form.scss\";\r\n\r\nexport default function Form() {\r\n    const [credentials,setCredentials]=useState({});\r\n    const history=useHistory();\r\n    const inputHandler=(e)=>{\r\n        setCredentials({...credentials,[e.target.name]:e.target.value});\r\n\r\n    }\r\n    const submitHandler=(e)=>{\r\n        e.preventDefault();\r\n        history.push(`/chat/${credentials.username}/${credentials.room}`);\r\n    }\r\n    return (\r\n        <div className=\"form__extDiv\">\r\n            <div className=\"form__container\">\r\n                <form onSubmit={submitHandler}>\r\n                    <fieldset>\r\n                        <legend>\r\n                            <label>\r\n                            Usename\r\n                            </label>\r\n                        </legend>\r\n                        <input type=\"text\" name=\"username\" placeholder=\"your name\" value={credentials?.username} autoComplete=\"off\" required onChange={inputHandler}/>\r\n\r\n                    </fieldset>\r\n                    <fieldset>\r\n                        <legend>\r\n                        <label>\r\n                            Room\r\n                        </label>\r\n                    </legend>\r\n                            <input type=\"text\" name=\"room\" placeholder=\"enter room\" value={credentials?.room} required autoComplete=\"off\" onChange={inputHandler}/>\r\n                    </fieldset>\r\n                    <button type=\"submit\">join</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\nimport \"./App.css\";\nimport {BrowserRouter,Route,Switch} from \"react-router-dom\"\nimport Chat from \"./components/chat/Chat\";\nimport Form from \"./components/Form\"\nexport default function App() {\n  return (\n    <BrowserRouter>\n    <Switch>\n      <Route exact path=\"/\">\n        <Form/>\n        </Route>\n    <Route exact path=\"/chat/:username/:room\">\n      <Chat/>\n    </Route>\n    </Switch>\n    </BrowserRouter>\n   \n  )\n}\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}